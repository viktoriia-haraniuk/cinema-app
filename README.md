# Cinema app :movie_camera:
# Project description
This application simulates cinema's ticket-reservation system and has next functions:
- Register a new user
- Login
- Authorization based on roles
- basic CRUD operations, which you can check on the next endpoints:
<pre>
[POST]   /register - registers a new user
[POST]   /cinema-halls - creates a new cinema hall
[GET]    /cinema-halls - returns all cinema halls
[POST]   /movies - creates a new movie
[GET]    /movies - returns all movies
[POST]   /movie-sessions - creates a new movie session
[GET]    /movie-sessions/available - returns all available movie sessions for the selected movie
[PUT]    /movie-sessions/{id} - updates a movie session
[DELETE] /movie-sessions/{id} - deletes a movie session
[POST]   /orders/complete - completes an order
[GET]    /orders - returns order history of user
[PUT]    /shopping-carts/movie-sessions - adds a movie session to shopping cart
[GET]    /shopping-carts/by-user - returns shopping cart of logged user
[GET]    /users/by-email - returns user by email
</pre>
All endpoints send and receive JSON data, except login page. It is generated by SPRING security.
Almost all the endpoints are secured by role based authorization. For more details check `SecurityConfig` class.
# Project architecture
1. DAO - Data access layer
2. Service - Application layer
3. Model - Presentation layer
# Database structure
![diagram](structure.png)
# Technologies used in project
- Java 11
- Apache Maven
- Apache Tomcat
- MySQL
- Spring Core
- Spring MVC
- Spring Security
- Hibernate
# How to run a project?
1. Clone this project
2. Install and configure MySQL and Apache Tomcat v 9.0.64
3. Setup database parameters in `resources/db.properties`
4. To inject default roles send GET request to http://localhost:8080/inject
5. After that you will be able to login as admin with next credentials:
email: admin@i.ua
password: admin123
6. To register new user send POST request to http://localhost:8080/register with email, password and repeatPassword.
